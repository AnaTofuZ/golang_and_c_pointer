# C言語のポインタ

## Introduction

C言語が現在も広く使われる理由の中にポインタ演算が出来るというものがある．
golangでもunsafeを利用すれば使用できるが，unsafeという名前が示す通り好ましくない使い方である．
これはgolangが開発された近年(2009年)では既にコンピュータアーキテクチャは高速に処理する様に進化している為
わざわざポインタ演算というプログラム上バグを生みやすい物を利用するのは辞めよう(言語機能自体に任せよう)という考えのためである．

C言語はB言語と呼ばれる言語から進化した言語であるが，これらの言語のそもそもの開発動機は「アセンブラを書くのがしんどい」という理由である．
アセンブラはレジスタと呼ばれるハードウェア的な変数を操作して様々な処理を行う．
アセンブラ自体はハードウェア(CPU)に依存する為，様々なメーカーが独自CPUを販売していた時代は相当な種類のアセンブラが存在した．
現在のアセンブラはIntelCPUに中心に組み込まれているx86,Raspberryなどのアーキテクチャに組み込まれているamdの二種類のアーキテクチャに対応したアセンブラが主流である．

アセンブラはハードウェアを操作する言語であるため，ピンポイントでの処理が求められる．
例えば現在のOSであっても，メモリ空間から使用できる場所を確保する処理などは，ピンポイントでメモリのxx番地を使えるようにスタックポインタと呼ばれる一種のカウンタを1bitごとなどに動かす必要がある．これはRubyやPythonと言った高級言語では隠蔽された処理であり，これを実行できるのは低レイヤーに近いアセンブラのみである．

話をC言語に戻そう．C言語はインラインにアセンブラを書くことが出来る．
つまりC言語中に，C言語ではできない処理があればアセンブラを書くことでアセンブラの力を借りることが出来るのである．
またかつてのC言語では `register` と呼ばれる指示子が存在していた(現在でも存在はしているがあまり使用されない)
これはC言語の変数をレジスタに乗せることが出来る指示子である．
ここからでも分かる通りC言語は高級言語でありながら，アセンブラなどと近い比較的低級言語に近い言語である．
よく高級言語の皮を被った低級言語であるとか，低級言語にしては高級言語であるなどと呼ばれるのはその為である．


ではポインタが使えれば何が出来るのであろうか．それはArduinoであったりRaspberryなどが有名なIoTの先駆けである組み込みシステムなどでは非常に役に立つ．
我々が利用しているMacBookなどの潤沢な資源が存在しない組み込み言語では，すべての処理はなるべく軽く，そしてハードウェアをピンポイントで指定する必要がある．
ポインタはこういった時に，Pythonなどでは真似する事ができないきめ細やかな処理をする事ができる．(最も組込み用のmrubyなども存在するが)
また，Cで扱うものはコンピュータを構成する物そのものであるため，OSなどのハードウェアを直接操作するものなどの記述には適している．
さらに高速化などのチューニングが必要な各種プログラミング言語自体も，C言語でメモリ管理などの難しい部分を実装してしまうことでユーザーに高速かつ安全な体験を提供できる．


こういった具合C言語のポインタ自体は現在でも使う機会が失われた訳ではない技術である．
特にコンピュータ・サイエンスを行う上ではメモリやデータ構造などは避けては通れない道である．
さぁ，実際にC言語のポインタを使ってみよう．
